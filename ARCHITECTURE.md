# Архитектура: Модульный Монолит (FinTrack)

## Главное правило: Поток данных идет только СВЕРХУ ВНИЗ.
Нижние слои не знают о существовании верхних.

### 1. Interface (Верхушка)
- **Что делает:** Telegram-бот, прием команд, отправка ответов.
- **Разрешено импортировать:** `grammy`, `accounting`, `reports`, `shared`.
- **Запрещено:** Писать SQL-запросы или бизнес-логику напрямую.

### 2. Accounting (Ядро)
- **Что делает:** Бизнес-логика финансов, запись в Supabase.
- **Разрешено импортировать:** `supabase-js`, `shared`.
- **КАТЕГОРИЧЕСКИ ЗАПРЕЩЕНО:** `grammy` (Telegram), `sheetjs` (Excel), модуль `interface`. Бухгалтерия не должна знать, откуда пришли деньги.

### 3. Reports (Аналитика)
- **Что делает:** Генерация Excel-отчетов.
- **Разрешено импортировать:** `sheetjs`, `accounting` (для получения данных), `shared`.
- **Запрещено:** `grammy`, модуль `interface`.

### 4. Shared (Фундамент)
- **Что делает:** Общие типы, клиенты БД, утилиты парсинга дат.
- **Разрешено импортировать:** Только стандартную библиотеку Deno (`@std/datetime`).
- **Запрещено:** Любая бизнес-логика.